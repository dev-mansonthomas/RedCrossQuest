<acme-navbar></acme-navbar>
<div class="container">
  <div class="row" ng-show="main.currentUserRole >= 4">
    <div class="panel panel-default">
      <!-- Default panel contents -->
      <div class="panel-heading"><b>Informations sur l'Unité Locale</b></div>
      <table class='table'>
        <thead>
        <tr>
          <th>Nombre de Quêteurs</th>
          <td class="{{main.setupStatus.queteurIncomplete?'warning':'default'}}">{{main.setupStatus.numberOfQueteur}}</td>
          <th>Nombre d'utilisateurs</th>
          <td class="{{main.setupStatus.userIncomplete?'warning':'default'}}">{{main.setupStatus.numberOfUser}}</td>
          <th>Nombre de points de quête</th>
          <td class="{{main.setupStatus.pointQueteIncomplete?'warning':'default'}}">{{main.setupStatus.numberOfPointQuete}}</td>
          <th>Nombre de Stats sur les années avant RCQ</th>
          <td class="{{main.setupStatus.dailyStatsIncomplete?'warning':'default'}}">{{main.setupStatus.numberOfDailyStats}}</td>
          <th>Nombre de troncs</th>
          <td class="{{main.setupStatus.troncsIncomplete?'warning':'default'}}">{{main.setupStatus.numberOfTroncs}}</td>
        </tr>
        </thead>
      </table>
    </div>
  </div>

  <div class="row"
       style="margin-bottom: 10px;"
       ng-show="main.currentUserRole >= 4 && !(main.setupStatus.queteurIncomplete || main.setupStatus.userIncomplete || main.setupStatus.pointQueteIncomplete || main.setupStatus.dailyStatsIncomplete || main.setupStatus.troncsIncomplete) && !main.displayInstructions">
    <div class="col-md-2 col-md-offset-4">
      <button class="btn btn-info" ng-click="main.displayInstructions=true">Afficher les instructions de paramétrage de RCQ</button>
    </div>
  </div>


  <div class="panel panel-primary" ng-show="main.currentUserRole >= 4 && ((main.setupStatus.queteurIncomplete || main.setupStatus.userIncomplete || main.setupStatus.pointQueteIncomplete || main.setupStatus.dailyStatsIncomplete || main.setupStatus.troncsIncomplete) || main.displayInstructions)">
    <div class="panel-heading">
      <h3 class="panel-title">Bienvenue dans RedCrossQuest ! Avant de commencer l'aventure, un peu de préparation !</h3>
    </div>
    <div class="panel-body">
      Cher Administrateur/Administratrice,<br/>
      <br/>

      Avant de pouvoir utiliser
      <button type="button" class="btn btn-default" data-container="body" data-toggle="popover" data-placement="top" data-content="Red Cross Quest : Quête Croix Rouge en anglais, ou quête fait référence à la quête du héros d'une aventure plus qu'à la collecte d'argent.">
        <span class="glyphicon glyphicon-plus" style="color:#E3001B;"></span> RedCrossQuest (RCQ)
      </button>, il faut configurer l'application pour que votre Unité Locale puisse l'utiliser.<br/>

      Ci-desssous, vous trouverez comment effectuer la configuration de l'application pour votre UL, cliquez sur le titre pour afficher/masquer les instructions.<br/>
      Il est conseillé d'effectuer la configuration dans l'ordre présenté ci-dessous, mais ce n'est pas obligatoire.
      <br/>
      <br/>


      <uib-accordion close-others="false">

        <div uib-accordion-group class="panel-{{main.setupStatus.userIncomplete?'warning':'default'}}"  heading="Créez les utilisateurs de l'application RCQ">
          <ul>
            <li><b>Pourquoi :</b> En créant plusieurs utilisateurs pour vos cadres de quêtes, ceux-ci peuvent vous aider à finir plus rapidement le paramétrage
              initial et ils vous permettent de distribuer les tâches lors de la quête (gérer préparation/départ/retour, comptage, suivi des chiffres).
              Notez que pour afficher le graphique public, vous ne pouvez le faire qu'avec un compte qui a le rôle "lecture seule".</li>
            <li><b>Durée :</b> Environ 2 min / utilisateur</li>
            <li><b>Comment : Ajoutez un Quêteur</b>
              <ol>
                <li>Les utilisateurs de l'application RCQ sont vos cadres de quête qui vont faire les départs/retours des troncs, compter les pièces etc...</li>
                <li>Un utilisateur de l'application RCQ est d'abord un quêteur, il faut donc d'abord créer le quêteur via "Ajouter un Quêteur"</li>
                <li>Une fois le quêteur créé, vous pourrez cliquer sur "Faire de ce bénévole un utilisateur de l'application RCQ". Il recevra un email pour initialiser son mot de passe RCQ (le lien est valable une heure). Son login étant son NIVOL.</li>
                <li>Par défaut, son niveau d'accès est en lecture seule. <br/>Voici les accès de chaque rôles :
                  <ol>
                    <li>Lecture Seule: Liste des quêteurs et le graphique public</li>
                    <li>Opérateur: rôle 'lecture seule' + Ajout/Mise à jour des quêteurs, préparation, départ, retour des troncs. Le graphique Opérateur.</li>
                    <li>Compteur: rôle 'Opérateur' + Comptage des troncs et le Graphique Compteur</li>
                    <li>Administrateur: rôle 'Opérateur' + Menu d'administration et le graphique Administrateur</li>
                  </ol>
                </li>
              </ol>
            </li>
          </ul>
        </div>

        <div uib-accordion-group class="panel-{{main.setupStatus.dailyStatsIncomplete?'warning':'default'}}" heading="Définissez vos résultats journaliers des années précédentes">
          <ul>
            <li><b>Pourquoi :</b> Ces données vous permettront de comparer les chiffres journaliers de cette année avec les précédentes années et ainsi de vous situer par rapport à votre objectif</li>
            <li><b>Durée :</b> Une fois que vous avez retrouvez les données, 2 minutes par année</li>
            <li><b>Comment :</b> Menu Administration->Résultats Journaliers (Avant RCQ)
              <ol>
                <li>Choisissez l'année, puis cliquez sur Rechercher, un bouton apparait <b>"Créez l'année XXXX"</b>, cliquez sur ce bouton</li>
                <li>Pour chaque jour, créez le montant quêté ce jour la, puis cliquez sur <b>"Sauvegarder"</b></li>
                <li>Répétez l'opération pour avoir au moins les 3 dernières années (plus vous avez de données, mieux c'est)</li>
                <li>Si le détail par jour n'est pas retrouvable, prenez votre montant de l'année et répartissez le grace à l'outil en bas de page</li>
              </ol>
            </li>
          </ul>
        </div>


        <div uib-accordion-group class="panel-{{main.setupStatus.troncsIncomplete?'warning':'default'}}" heading="Créez les troncs dans RCQ">
          <ul>
            <li><b>Pourquoi :</b> A chaque tronc sera attribué un identifiant représenté sous la forme d'un QRCode <span class="glyphicon glyphicon-qrcode" aria-hidden="true"></span> qui est à coller sous le tronc,
              ce qui permet de fiabiliser les opérations de distrubtion des troncs et de comptages des pièces et billets</li>
            <li><b>Durée :</b> 1 minute</li>
            <li><b>Comment : </b> Menu Administration->Liste des Troncs -> bouton 'Créer des troncs'
              <ol>
                <li>Comptez vos troncs (boite métallique de collecte de pièces) que vous avez au local</li>
                <li>Choisissez 'actif' à oui</li>
                <li>Choisissez le type de tronc
                  <ul>
                    <li><b>Tronc                    :</b> le tronc des quêteurs</li>
                    <li><b>Urne chez un commerçant  :</b> un tronc que vous laissez pendant la semaine de quête chez les commerçants de quartier.
                      Cela peut être le même tronc que celui des quêteurs ou sous une forme différente.</li>
                    <li><b>Autre                    :</b> par exemple, un tronc laissé au local.</li>
                    <li><b>Terminal Carte Bleue     :</b> Si vous avez un terminal CB en test dans votre Unité Locale. Pour les troncs de type CB, un seul champ de saisie sera disponible: le montant total des dons CB</li>
                  </ul>
                </li>
                <li>Indiquez le nombre de tronc du type choisi dans le formulaire et cliquez sur "Créer de nouveaux Troncs"</li>
              </ol>
            </li>
          </ul>
        </div>

        <div uib-accordion-group class="panel-{{main.setupStatus.pointQueteIncomplete?'warning':'default'}}" heading="Définition des points de quête">
          <ul>
            <li><b>Pourquoi :</b> La défnition des points de quête permet de déterminer où vos quêteurs vont quêter et dans quelle condition
              (pieton, feux, magasin, à combien de quêteurs).<br/>
            Vous pourrez visualiser sur une carte vos points de quête, lesquels donnent le plus, depuis combien de temps vos quêteurs sont sur le terrain.
            </li>
            <li><b>Durée :</b>2 minutes par point de quête</li>
            <li><b>Comment :</b> Menu Administration->Point de Quête
              <ol>
                <li>Nous avons automatiquement créé votre premier point de quête qui correspond à votre Local.</li>
                <li>L'adresse a été récupérée d'un référentiel Croix Rouge en 2016 et les coordonnées GPS calculées automatiquement à partir de l'adresse, aussi vérifiez l'exactitude de l'emplacement</li>
                <li>Vous pouvez déplacer le marqueur la carte pour affiner l'emplacement du point de quête. L'application vous proposera une nouvelle adresse que vous pouvez utiliser ou non.</li>
              </ol>
            </li>
          </ul>
        </div>

        <div uib-accordion-group class="panel-{{main.setupStatus.queteurIncomplete?'warning':'default'}}" heading="Créez les quêteurs de votre unité locale">
          <ul>
            <li><b>Pourquoi :</b> Chaque quêteur doit être identifié dans l'application, et ce afin de pouvoir lui envoyer des emails, de s'assurer qu'un mineur ne quête pas sur un point de quête non prévu pour les mineurs</li>
            <li><b>Durée via Export Gaia :</b> environ 5 minutes + le temps d'éventuellement corriger les données (Variable).</li>
            <li><b>Durée en ajoutant quêteur par quêteur : </b> environ 2 minutes par quêteur.</li>
            <li><b>Comment : Ajoutez un Quêteur</b>
              <ol>
                <li>Soit vous ajouter à la main tous vos quêteurs (non recommandé si vous avez plus d'une vingtaine de bénévoles)</li>
                <li>Soit vous faîtes un export Gaia des bénévoles de votre Unité Locale et vous l'adaptez au format suivant:</li>
                <ol>
                  <li>Nivol</li>
                  <li>Sexe: 0: femme, 1: homme</li>
                  <li>Nom</li>
                  <li>Prénom</li>
                  <li>Date de naissance	au format AAAA-MM-DD: Obligatoire pour les bénévoles mineurs, si inconnus pour les adultes, mettre 1922-12-22.</li>
                  <li>Telephone mobile : au format +33XXXXXXXXX (pour vous permettre d'appeler le bénévole rapidement en cas de souci, l'application RCQ pourrait envoyer des SMS prochainement)</li>
                  <li>Email : l'application RCQ envoie des emails </li>
                  <li>Secteur: 1: Action Sociale, 2: Secours, 4:Ancien Bénévole, inactif ou adhérent</li>
                </ol>
                </li>
                <li>Et vous envoyez ce fichier à <a href="mailto:thomas.manson@croix-rouge.fr?subject=[Export Queteur][UL={{::main.ulId}}] {{::main.ulName}}">thomas.manson@croix-rouge.fr</a>
                  avec pour sujet "[Export Queteur][UL={{::main.ulId}}] {{::main.ulName}}" en précisant votre mobile dans le corps du mail (en cas de souci).
                  Je m'occuperai de charger vos quêteurs d'un coup.</li>
              </ol>
            </li>
          </ul>
        </div>



        <div uib-accordion-group class="panel-default" heading="Achat de matériel">
          <ul>
            <li><b>Pourquoi :</b> Pour utiliser efficacement l'application RedCrossQuest</li>
            <li><b>Comment :</b>
              <ol>
                <li><a href="https://www.ctms.fr/fraude-monetique/trieuse-valorisatrice/53-tdp-50.html" target="_blank">Trieuse de pièces CMTS TDP 50</a> : Pour compter de manière fiable et rapide les pièces</li>
                <li><a href="https://www.amazon.fr/gp/product/B0096M4QOY/ref=oh_aui_detailpage_o07_s00?ie=UTF8&psc=1" target="_blank">WebCam</a> : Même si l'application est prévue pour pouvoir s'en passer, elle fait gagner du temps et fiabilise les données saisies (par exemple, cela évite les fautes de frappe qui feraient choisir une personne à la place d'une autre ou un tronc à la place d'un autre)</li>
                <li><a href="https://www.amazon.fr/dp/B000KJOPB6/ref=wl_it_dp_o_pC_S_ttl?_encoding=UTF8&colid=1KCTGF7CH2M0J&coliid=I79UXJI8L7C57" target="_blank">Film autocollant pour coller les QRCodes</a> : Au moins sur les troncs, cela permet de protéger le QRCode de la pluie.<br/> Ou sinon, cette feuille autocollante est resistante à la pluie, mais nécessite une imprimante laser : <a href="https://www.avery.fr/produit/etiquette-ultra-resistante-l4775-20" target="_blank">Etiquette Ultra Resistante</a></li>
                <li><a href="https://www.amazon.fr/100-feuilles-papier-adh%C3%A9sif-blanc/dp/B0161EU3VO/ref=pd_sim_229_4?_encoding=UTF8&psc=1&refRID=ZZADHQWY505X2068AMZ1" target="_blank">Page etiquette autocollante pour coller les QR Code des quêteurs sur les cartes de quêteurs</a></li>
                <li><a href="http://www.officedepot.fr/catalog/catalogSku.do?id=5621850&XREF1=IAFRH10999GOOPS" target="_blank">Massicot pour couper les QR Codes</a></li>
              </ol>
            </li>
          </ul>
        </div>

        <div uib-accordion-group class="panel-default" heading="Impression des QR Codes">
          <ul>
            <li><b>Pourquoi :</b> En utilisant les QRCode et en les scannant avec la webcam, vous gagnez en rapidité et en fiabilité en évitant les fautes de frappe.</li>
            <li><b>Durée : </b>20 minutes</li>
            <li><b>Comment :</b>
              <ol>
                <li>Aller sur les deux pages suivantes et cliquez sur le bouton "Imprimer"</li>
                <li><b>Menu->Troncs - Impression des QRCodes</b></li>
                <li><b>Menu->Quêteurs - Impression des QRCodes</b></li>
                <li>Par défaut la taille des QRCode est fixée à 200, il est recommandé de ne pas changer cette valeur</li>
                <li>Une fois imprimé, il faut découper chaque QRCode. Le plus simple est d'utiliser un Massicot</li>
              </ol>
            </li>
          </ul>
        </div>

        <div uib-accordion-group class="panel-default" heading="Test de bon fonctionnement du PC qui servira pour la quête">
          <ul>
            <li><b>Pourquoi :</b> Pour s'assurer que le jour J tout fonctionnera correctement</li>
            <li><b>Durée : </b>5 minutes</li>
            <li><b>Comment :</b> <u>Depuis l'ordinateur qui sera utilisé pendant la quête</u>
              <ol>
                <li>Effectuez une préparation de Tronc</li>
                <li>Naviguez sur la page "Graphiques" et ouvrez un graphique</li>
              </ol>
            </li>
          </ul>
        </div>
      </uib-accordion>
    </div>
  </div>




  <div class="jumbotron text-center" ng-style="{'background-color':main.deploymentType=='P'?'':(main.deploymentType=='D'?'#b9def0':'blue')}">
    <h1>'Allo, 'Allo  {{main.first_name}}! </h1>

    <span ng-show="main.deploymentType=='P'" class="label label-danger" >Site de Production</span>
    <span ng-show="main.deploymentType=='D'" class="label label-primary">Site de Developpement</span>
    <span ng-show="main.deploymentType=='T'" class="label label-info"   >Site de TEST</span>


    <h3>{{::main.username}} - {{::main.ulName}}</h3>
    <p class="lead">
      <img src="assets/images/yeoman.png" alt="I'm Yeoman"><br>
      <b>C'est la quête nationale de la Croix Rouge :)</b>
    </p>
    <p>
      Partagez aux quêteurs ce tutorial du quêteur qui est hillarant et très bien fait :<br>
      <a href="https://www.youtube.com/watch?v=B_6UThpexoo" target="_blank">https://www.youtube.com/watch?v=B_6UThpexoo</a>

      <a href="https://www.youtube.com/watch?v=B_6UThpexoo" target="_blank"><img src="assets/images/TutoQueteur.jpg"/></a>

    </p>
    <p>
      With ♥ thanks to the contributions of
      <acme-malarkey extra-values="['JetBrain IntelliJ and DataGrip', 'Yeoman', 'Gulp', 'Angular', 'PHP', 'MySQL', 'Linux', 'Google Cloud Platform', 'TIBCO Spotfire', 'NPM', 'angular-qr-scanner-updated', 'angular-qr-updated', 'Bootstrap', 'animate.css', 'jquery', 'malarkey', 'momentjs', 'ngmap', 'ngstorage', 'qrcode', 'zxcvbn', 'Composer', 'Container-interop', 'fzaninotto', 'lcobucci', 'monolog', 'nesbot', 'nikic', 'paragonie', 'phpmailer', 'pimple', 'psr', 'ramsey', 'robmorgan', 'slim', 'symphony'  ]"></acme-malarkey>
    </p>
  </div>

</div>
